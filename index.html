<!DOCTYPE html>
<html>
<head>
    <title>Platform Jumper</title>
    <style>
        body { margin: 0; overflow: hidden; }
        #game { background: #1a1a1a; }
    </style>
</head>
<body>
    <canvas id="game" width="800" height="600"></canvas>
    <script>
        const canvas = document.getElementById('game');
        const ctx = canvas.getContext('2d');
        let playerX = 50, playerY = 500, coins = 0, level = 1, isJumping = false;
        let keyState = { left: false, right: false };
        let platforms = [];
        let hazards = [];
        let enemies = [];

        // Level configurations
        const levels = {
            1: {
                coins: [{x:200,y:500}, {x:400,y:500}, {x:600,y:500}],
                platforms: [{x:0,y:550,w:800,h:50}],
                hazards: [{x:300,y:530,w:100,h:20}],
                enemies: []
            },
            2: {
                coins: [{x:150,y:400}, {x:350,y:400}, {x:550,y:400}],
                platforms: [{x:0,y:550,w:800,h:50}, {x:250,y:450,w:100,h:20}],
                hazards: [{x:450,y:430,w:100,h:20}],
                enemies: [{x:500,y:500,speed:2}]
            },
            3: {
                coins: [{x:100,y:300}, {x:300,y:300}, {x:500,y:300}],
                platforms: [{x:0,y:550,w:800,h:50}, {x:200,y:450,w:100,h:20}, {x:400,y:350,w:100,h:20}],
                hazards: [{x:600,y:330,w:100,h:20}],
                enemies: [{x:200,y:500,speed:3}, {x:600,y:500,speed:-3}]
            },
            4: {
                coins: [{x:50,y:200}, {x:250,y:200}, {x:450,y:200}, {x:650,y:200}],
                platforms: [{x:0,y:550,w:800,h:50}, {x:150,y:450,w:100,h:20}, {x:350,y:350,w:100,h:20}, {x:550,y:250,w:100,h:20}],
                hazards: [],
                enemies: [{x:100,y:500,speed:4}, {x:700,y:500,speed:-4}]
            },
            5: {
                coins: [{x:700,y:150}, {x:100,y:150}, {x:400,y:250}],
                platforms: [
                    {x:0,y:550,w:800,h:50}, 
                    {x:100,y:400,w:100,h:20},
                    {x:300,y:400,w:100,h:20},
                    {x:500,y:400,w:100,h:20},
                    {x:600,y:300,w:100,h:20},
                    {x:400,y:200,w:100,h:20}
                ],
                hazards: [{x:200,y:530,w:100,h:20}, {x:500,y:530,w:100,h:20}],
                enemies: [{x:150,y:500,speed:5}, {x:650,y:500,speed:-5}]
            },
            6: {
                coins: [{x:50,y:100}, {x:750,y:100}, {x:400,y:50}],
                platforms: [
                    {x:0,y:550,w:800,h:50},
                    {x:100,y:450,w:100,h:20},
                    {x:300,y:350,w:100,h:20},
                    {x:500,y:250,w:100,h:20},
                    {x:700,y:150,w:100,h:20},
                    {x:500,y:50,w:100,h:20}
                ],
                hazards: [{x:200,y:530,w:100,h:20}, {x:400,y:530,w:100,h:20}, {x:600,y:530,w:100,h:20}],
                enemies: [{x:50,y:500,speed:6}, {x:750,y:500,speed:-6}]
            }
        };

        function initLevel() {
            const currentLevel = levels[level];
            coins = currentLevel.coins.slice();
            platforms = currentLevel.platforms.slice();
            hazards = currentLevel.hazards.slice();
            enemies = currentLevel.enemies.map(e => ({...e, dir:1}));
            playerX = 50;
            playerY = 500;
        }

        function draw() {
            // Clear screen
            ctx.fillStyle = '#1a1a1a';
            ctx.fillRect(0, 0, 800, 600);
            
            // Draw platforms
            ctx.fillStyle = '#444';
            platforms.forEach(p => ctx.fillRect(p.x, p.y, p.w, p.h));
            
            // Draw hazards
            ctx.fillStyle = '#ff4444';
            hazards.forEach(h => ctx.fillRect(h.x, h.y, h.w, h.h));
            
            // Draw coins
            ctx.fillStyle = '#ffd700';
            coins.forEach(c => {
                ctx.beginPath();
                ctx.arc(c.x, c.y, 10, 0, Math.PI * 2);
                ctx.fill();
            });
            
            // Draw player
            ctx.fillStyle = '#00ff00';
            ctx.fillRect(playerX, playerY, 30, 30);
            
            // Draw UI
            ctx.fillStyle = '#fff';
            ctx.font = '20px Arial';
            ctx.fillText(`Level: ${level} | Coins: ${coins.length}`, 10, 30);
        }

        // Smooth controls
        document.addEventListener('keydown', (e) => {
            if(e.key === 'ArrowLeft') keyState.left = true;
            if(e.key === 'ArrowRight') keyState.right = true;
            if(e.key === 'ArrowUp' && !isJumping) {
                isJumping = true;
                playerY -= 100;
            }
        });

        document.addEventListener('keyup', (e) => {
            if(e.key === 'ArrowLeft') keyState.left = false;
            if(e.key === 'ArrowRight') keyState.right = false;
        });

        function update() {
            // Horizontal movement
            if(keyState.left) playerX = Math.max(0, playerX - 5);
            if(keyState.right) playerX = Math.min(770, playerX + 5);

            // Platform collision
            let onPlatform = false;
            platforms.forEach(p => {
                if(playerX < p.x + p.w &&
                   playerX + 30 > p.x &&
                   playerY + 30 > p.y &&
                   playerY + 30 < p.y + p.h) {
                    playerY = p.y - 30;
                    isJumping = false;
                    onPlatform = true;
                }
            });

            // Hazard collision
            hazards.forEach(h => {
                if(playerX < h.x + h.w &&
                   playerX + 30 > h.x &&
                   playerY < h.y + h.h &&
                   playerY + 30 > h.y) {
                    playerX = 50;
                    playerY = 500;
                }
            });

            // Coin collection
            coins = coins.filter(c => !(Math.abs(playerX - c.x) < 30 && Math.abs(playerY - c.y) < 30);

            // Level completion
            if(coins.length === 0) {
                level++;
                if(level > 6) {
                    alert('CHAMPION! ALL LEVELS CLEARED!');
                    return;
                }
                initLevel();
            }

            // Gravity
            if(!onPlatform) {
                playerY += 3;
                isJumping = true;
            }
        }

        // Game loop
        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        // Start game
        initLevel();
        gameLoop();
    </script>
</body>
</html>
